# Парсер Каги (fansubs.ru) / 卡蓋的分析器
Получаем нужную инфу с каги без лишних ресурсозатрат.   
Примеры смотри в `examples.php`
### Начало работы
Скачиваем, подключаем:
```php
require_once 'kg_parser.php';
```
Создаём объект и юзаем нужный метод:
```php
$kage = new KageParser();
$response = $kage->method(ARG);
```
где вместо `method(ARG)` метод из списка ниже.
###Методы
####base($aid)
***
Возвращает инфу о переводах в архиве
  
**Аргументы**
* `$aid` - Id ячейки аниме в архиве. Обязательный.
  
**Возвращаемое значение**  
Возвращает индексированный массив вида:
```php
[0] => (
	'translateId' => $translateId,
	'series' => $series,
	'format' => $format,
	'date' => $date,
	'staff' => $staff[]
					),
[1] => (...
```
Где 
* `translateId` - Id перевода
* `series` - что переведено (например, ТВ 1-4)
* `format` - формат сабов
* `date` - последнее обновление
* `staff` - массив с информацией о переводчиках. Выглядит так:
```php
[0] => (
	'subberId' => $subberId, //Id переводчика
	'nickname' => $nickname, //ник переводчика
	'role' => $role, //должность в переводе
	'avatar' => $avatar //аватарка (например, 1717_44828424.png)
					),
[1] => (...
```

####forum($forum, $pages)
***
Возвращает массив тем с нужного форума.
  
**Аргументы**
* `$forum` - номер форума. Обязательный.
* `$pages` - сколько страниц форума рассмотреть. По умолчанию 1. Необязательный.
  
**Возвращаемое значение**  
Возвращает индексированный массив вида:
```php
[0] => (
	'topicId' => $topicId,
	'topicTitle' => $topicTitle,
	'authorId' => $authorId,
	'authorName' => $authorName,
	'lastMsg' => $lastMsg
					),
[1] => (...
```
Где 
* `topicId` - Id темы
* `topicTitle` - название темы
* `authorId` - Id автора
* `authorName` - ник автора
* `lastMsg` - дата последнего сообщения

####isArchiveDead($aid, $mode)
***
Проверяет, существует ли ячейка в архиве.
  
**Аргументы**
* `$aid` - номер темки. Обязательный.
* `$mode` - режим. Необязательный.

>  1 - проверка аниме по Id (по умолчанию)  
>  2 - проверка юзера по Id
  
**Возвращаемое значение**  
Если ячейки не существует, возвращает `true`

####isTopicDead($tid)
***
Проверяет, существует ли темка.
  
**Аргументы**
* `$tid` - номер темки. Обязательный.
  
**Возвращаемое значение**  
Если темки не существует, возвращает `true`

