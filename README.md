# Парсер Каги (fansubs.ru) / 卡蓋的分析器
Получаем нужную инфу с каги без лишних ресурсозатрат.   
Примеры смотри в `examples.php`
### Содержание
* [Начало работы](#Начало-работы-start)
* [Методы](#Методы)
  * [base](#baseaid)
  * [forum](#forumforum-pages)
  * [isArchiveDead](#isarchivedeadaid-mode)
  * [isTopicDead](#istopicdeadtid)
  * [user](#useruid)

### Начало работы
Скачиваем, подключаем:
```php
require_once 'kg_parser.php';
```
Создаём объект и юзаем нужный метод:
```php
$kage = new KageParser();
$response = $kage->method(ARG);
```
где вместо `method(ARG)` метод из списка ниже.
###Методы
####base($aid)
***
Возвращает инфу о переводах в архиве
  
**Аргументы**
* `$aid` - Id ячейки аниме в архиве. Обязательный.
  
**Возвращаемое значение**  
Возвращает индексированный массив вида:
```php
[0] => (
	'translateId' => $translateId, //=> "50000"
	'series' => $series, //=> "ТВ 10"
	'format' => $format, //=> "ASS"
	'date' => $date, //=> "30.02.2016"
	'staff' => $staff[] //=> array()
					),
[1] => (...
```
Где 
* `translateId` - Id **перевода**
* `series` - что переведено (например, ТВ 1-4)
* `format` - формат сабов
* `date` - последнее обновление
* `staff` - массив с информацией о переводчиках. Выглядит так:
```php
[0] => (
	'subberId' => $subberId, //Id переводчика => "10000"
	'nickname' => $nickname, //ник переводчика => "Sewayuki"
	'role' => $role, //должность в переводе => "Переводчик"
	'avatar' => $avatar //аватарка => "1717_44828424.png"
					),
[1] => (...
```

####forum($forum, $pages)
***
Возвращает массив тем с нужного форума.
  
**Аргументы**
* `$forum` - номер форума. Обязательный.
* `$pages` - сколько страниц форума рассмотреть. По умолчанию 1. Необязательный.
  
**Возвращаемое значение**  
Возвращает индексированный массив вида:
```php
[0] => (
	'topicId' => $topicId,
	'topicTitle' => $topicTitle,
	'authorId' => $authorId,
	'authorName' => $authorName,
	'lastMsg' => $lastMsg
					),
[1] => (...
```
Где 
* `topicId` - Id темы
* `topicTitle` - название темы
* `authorId` - Id автора
* `authorName` - ник автора
* `lastMsg` - дата последнего сообщения

####isArchiveDead($aid, $mode)
***
Проверяет, существует ли ячейка в архиве.
  
**Аргументы**
* `$aid` - Id в архиве. Обязательный.
* `$mode` - режим. Необязательный.

>  1 - проверка аниме по Id (по умолчанию)  
>  2 - проверка юзера по Id
  
**Возвращаемое значение**  
Если ячейки не существует, возвращает `true`

####isTopicDead($tid)
***
Проверяет, существует ли темка.
  
**Аргументы**
* `$tid` - номер темки. Обязательный.
  
**Возвращаемое значение**  
Если темки не существует, возвращает `true`

####user($uid)
***
Возвращает информацию о юзере архива.
  
**Аргументы**
* `$uid` - Id юзера. Обязательный.
  
**Возвращаемое значение**  
Возвращает индексированный массив вида:
```php
[0] => (
	'nickname' => $nickname, //=> "Sewayuki"
	'email' => $email, //=> "sewayuki[гав]gmail.com"
	'workInfo' => $workInfo //=> array()
					),
[1] => (...
```
Где 
* `nickname` - ник переводчика
* `email` - емейл юзера
* `workInfo` - массив с информацией о переводах. Выглядит так:
```php
[0] => (
	'titleId' => $subberId, //Id тайтла =>"5191"
	'titleName' => $nickname, //строка тайтла =>"Konosuba ТВ 10"
	'role' => $role //должность в переводе =>"Переводчик"
					),
[1] => (...
```

